#!/bin/bash

# ðŸŽ¨ Ð”Ð•ÐœÐžÐÐ¡Ð¢Ð ÐÐ¦Ð˜Ð¯ FREEDOME SPHERE Ð”Ð›Ð¯ 3D Ð¥Ð£Ð”ÐžÐ–ÐÐ˜ÐšÐ
# Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ Ð¯Ð½Ð° - Ð¿Ñ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾

set -e

echo "ðŸŽ¨ ==============================================="
echo "   FREEDOME SPHERE - Ð”Ð•ÐœÐžÐÐ¡Ð¢Ð ÐÐ¦Ð˜Ð¯ Ð”Ð›Ð¯ 3D Ð¥Ð£Ð”ÐžÐ–ÐÐ˜ÐšÐ"
echo "   Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ Ð¯Ð½Ð°"
echo "ðŸŽ¨ ==============================================="
echo ""

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Flutter
if ! command -v flutter &> /dev/null; then
    echo "âŒ Flutter Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Flutter Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶ÐµÐ½Ð¸Ñ."
    exit 1
fi

echo "âœ… Flutter Ð½Ð°Ð¹Ð´ÐµÐ½: $(flutter --version | head -n 1)"
echo ""

# ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
cd "$(dirname "$0")"

echo "ðŸ“ Ð Ð°Ð±Ð¾Ñ‡Ð°Ñ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ: $(pwd)"
echo ""

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
echo "ðŸ”§ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹..."
flutter pub get
echo ""

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
echo "ðŸŽ¬ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²..."

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿Ð°Ð¿ÐºÑƒ Ð´Ð»Ñ Ð´ÐµÐ¼Ð¾
mkdir -p demo_assets

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿Ñ€Ð¾ÑÑ‚ÑƒÑŽ 3D Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð´Ð»Ñ Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸
cat > demo_assets/demo_model.json << 'EOF'
{
  "name": "Ð”ÐµÐ¼Ð¾ ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð´Ð»Ñ Ð¯Ð½Ð°",
  "type": "3d_model",
  "geometry": {
    "vertices": [
      [-1, -1, 0], [1, -1, 0], [1, 1, 0], [-1, 1, 0],
      [-1, -1, 2], [1, -1, 2], [1, 1, 2], [-1, 1, 2]
    ],
    "faces": [
      [0, 1, 2], [0, 2, 3], [4, 7, 6], [4, 6, 5],
      [0, 4, 5], [0, 5, 1], [2, 6, 7], [2, 7, 3],
      [0, 3, 7], [0, 7, 4], [1, 5, 6], [1, 6, 2]
    ]
  },
  "materials": [
    {
      "name": "Ð”ÐµÐ¼Ð¾ ÐœÐ°Ñ‚ÐµÑ€Ð¸Ð°Ð»",
      "color": [0.2, 0.6, 1.0],
      "metalness": 0.1,
      "roughness": 0.3
    }
  ],
  "animation": {
    "duration": 5.0,
    "keyframes": [
      {"time": 0.0, "rotation": [0, 0, 0]},
      {"time": 2.5, "rotation": [0, 180, 0]},
      {"time": 5.0, "rotation": [0, 360, 0]}
    ]
  }
}
EOF

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð°ÑƒÐ´Ð¸Ð¾ Ñ„Ð°Ð¹Ð» Ð´Ð»Ñ Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸
cat > demo_assets/demo_audio.json << 'EOF'
{
  "name": "Ð”ÐµÐ¼Ð¾ ÐÑƒÐ´Ð¸Ð¾",
  "type": "background_music",
  "anAntaSound": {
    "enabled": true,
    "spatialFactor": 1.0,
    "quantumResonance": {
      "frequency": 432.0,
      "intensity": 0.7,
      "coherenceTime": 2000.0
    }
  }
}
EOF

echo "âœ… Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ ÑÐ¾Ð·Ð´Ð°Ð½Ñ‹"
echo ""

# Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
echo "ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº FreeDome Sphere..."
echo ""
echo "ðŸ“‹ Ð”Ð•ÐœÐžÐÐ¡Ð¢Ð ÐÐ¦Ð˜ÐžÐÐÐ«Ð™ Ð¡Ð¦Ð•ÐÐÐ Ð˜Ð™:"
echo "   1. Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ 3D Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð¸Ð· Blender (Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸)"
echo "   2. ÐšÐ²Ð°Ð½Ñ‚Ð¾Ð²Ð°Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð´Ð»Ñ ÐºÑƒÐ¿Ð¾Ð»Ð°"
echo "   3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° anAntaSound ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹"
echo "   4. ÐÐ½Ð°Ð»Ð¸Ð· Ð˜Ð˜ 'ÐŸÐ¾Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ð›ÑŽÐ±Ð¾Ð¼Ð¸Ñ€Ð°'"
echo "   5. Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ"
echo "   6. ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð² Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ñ‹"
echo ""
echo "â±ï¸  Ð’Ñ€ÐµÐ¼Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ: 8 Ð¼Ð¸Ð½ÑƒÑ‚ Ð²Ð¼ÐµÑÑ‚Ð¾ 17 Ñ‡Ð°ÑÐ¾Ð²!"
echo ""

# Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Flutter Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
flutter run -d chrome --web-port=8080

echo ""
echo "ðŸŽ‰ Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°!"
echo "ðŸ“± Ð“Ð¾Ñ‚Ð¾Ð²Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ð² Google Play Ð¸ Apple Store"
