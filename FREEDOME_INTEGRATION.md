# FreeDome Integration Guide

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é FreeDome Sphere —Å —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π FreeDome —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫:

- `flutter_freedome` - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å FreeDome
- `flutter_freedome_calibration` - –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ —Å–∏—Å—Ç–µ–º
- `flutter_freedome_connectivity` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **FreedomeIntegrationService** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
2. **FreedomeCore** - —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã FreeDome
3. **FreedomeCalibration** - –º–æ–¥—É–ª—å –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
4. **FreedomeConnectivity** - –º–æ–¥—É–ª—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

```
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ‚Üí –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ ‚Üí –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```dart
final freedomeService = FreedomeIntegrationService();
await freedomeService.initialize();
```

### 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ

```dart
final connected = await freedomeService.connect(
  serverUrl: 'localhost',
  port: 8080,
);
```

### 3. –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã

```dart
// –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ
final audioResult = await freedomeService.calibrateAudio();

// –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –≤–∏–¥–µ–æ
final videoResult = await freedomeService.calibrateVideo();
```

### 4. –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```dart
await freedomeService.sendData({
  'type': 'project',
  'data': projectData,
});
```

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –≠–∫—Ä–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–î–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –º–µ–Ω—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚Üí FreeDome Integration**

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞:
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

- **Disconnected** - –æ—Ç–∫–ª—é—á–µ–Ω–æ
- **Connecting** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- **Connected** - –ø–æ–¥–∫–ª—é—á–µ–Ω–æ
- **Error** - –æ—à–∏–±–∫–∞

## API Reference

### FreedomeIntegrationService

#### –ú–µ—Ç–æ–¥—ã

- `initialize()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `connect({String? serverUrl, int? port})` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ
- `disconnect()` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç —Å–∏—Å—Ç–µ–º—ã
- `calibrateAudio({List<String>? devices})` - –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ
- `calibrateVideo({Map<String, dynamic>? settings})` - –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –≤–∏–¥–µ–æ
- `sendData(Map<String, dynamic> data)` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- `getSystemStatus()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
- `getAvailableDevices()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

#### –°–≤–æ–π—Å—Ç–≤–∞

- `isInitialized` - —Å—Ç–∞—Ç—É—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `isConnected` - —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `connectionStatus` - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

#### ConnectionStatus

```dart
enum ConnectionStatus {
  disconnected,
  connecting,
  connected,
  error,
}
```

#### CalibrationResult

```dart
class CalibrationResult {
  final bool success;
  final String status;
  final Map<String, dynamic>? data;
  final String? error;
}
```

#### SystemStatus

```dart
class SystemStatus {
  final bool isRunning;
  final Map<String, dynamic> info;
  final List<String> activeServices;
}
```

#### DeviceInfo

```dart
class DeviceInfo {
  final String id;
  final String name;
  final String type;
  final bool isAvailable;
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
flutter test test/freedome_integration_test.dart
```

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ
3. –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ
4. –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
5. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## –ó–∞–≥–ª—É—à–∫–∏ (Stubs)

–î–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∏ –≤ —Ñ–∞–π–ª–µ `lib/services/freedome_api_stubs.dart`:

- –ò–º–∏—Ç–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É —Ä–µ–∞–ª—å–Ω—ã—Ö API
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –í–∫–ª—é—á–∞—é—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- –õ–æ–≥–∏—Ä—É—é—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã

–ö–æ–≥–¥–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:

1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `pubspec.yaml`
2. –ó–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç `freedome_api_stubs.dart` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
3. –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª –∑–∞–≥–ª—É—à–µ–∫
4. –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

```dart
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
final freedomeService = FreedomeIntegrationService();
await freedomeService.initialize();

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
final connected = await freedomeService.connect(
  serverUrl: '192.168.1.100',
  port: 8080,
);

if (connected) {
  // –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞
  await freedomeService.calibrateAudio();
  await freedomeService.calibrateVideo();
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
  await freedomeService.sendData({
    'type': 'project',
    'name': 'My Project',
    'scenes': sceneData,
  });
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```dart
try {
  await freedomeService.initialize();
  await freedomeService.connect();
} catch (e) {
  print('–û—à–∏–±–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ FreeDome: $e');
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞

```dart
// –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
freedomeService.addListener(() {
  print('–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ${freedomeService.connectionStatus}');
});
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å —ç–º–æ–¥–∑–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞:

- üîÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- üéµ –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ
- üìπ –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –≤–∏–¥–µ–æ
- üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –£—Å–ø–µ—Ö
- ‚ùå –û—à–∏–±–∫–∞

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å FreeDome —Å–∏—Å—Ç–µ–º—ã
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## –í–µ—Ä—Å–∏–∏

- **v1.0.0** - –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏
- **v1.1.0** - –î–æ–±–∞–≤–ª–µ–Ω UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **v1.2.0** - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã
- **v2.0.0** - –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏
