<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freedome Sphere - Professional Content Editor</title>
    <style>
        :root {
            /* Default theme variables - —Å–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–∞—è */
            --bg-primary: #f0f8ff;
            --bg-secondary: #e6f3ff;
            --bg-tertiary: #d1e7ff;
            --text-primary: #1a365d;
            --text-secondary: #2d5a87;
            --text-muted: #4a6fa5;
            --accent-color: #4a9eff;
            --accent-hover: #3a8eef;
            --border-color: #b8d4f0;
            --shadow: rgba(74, 158, 255, 0.15);
            --success-color: #28a745;
            --warning-color: #ffc107;
            --error-color: #dc3545;
            --logo-emoji: "üåê";
            --edition-name: "Freedome Sphere";
        }

        [data-theme="dark"] {
            /* Dark theme variables */
            --bg-primary: #1a1a1a;
            --bg-secondary: #2a2a2a;
            --bg-tertiary: #3a3a3a;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-muted: #999999;
            --accent-color: #4a9eff;
            --accent-hover: #3a8eef;
            --border-color: #3a3a3a;
            --shadow: rgba(0, 0, 0, 0.3);
            --success-color: #28a745;
            --warning-color: #ffc107;
            --error-color: #dc3545;
            --logo-emoji: "üåê";
            --edition-name: "Freedome Sphere";
        }

        [data-edition="vaishnava"] {
            /* –í–∞–π—à–Ω–∞–≤ Edition - –∑–æ–ª–æ—Ç–∏—Å—Ç–æ-–æ—Ä–∞–Ω–∂–µ–≤–∞—è —Ç–µ–º–∞ */
            --bg-primary: #fff8e1;
            --bg-secondary: #ffecb3;
            --bg-tertiary: #ffe082;
            --text-primary: #5d4037;
            --text-secondary: #8d6e63;
            --text-muted: #a1887f;
            --accent-color: #ff9800;
            --accent-hover: #f57c00;
            --border-color: #ffcc02;
            --shadow: rgba(255, 152, 0, 0.2);
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --error-color: #f44336;
            --logo-emoji: "üïâÔ∏è";
            --edition-name: "Freedome Sphere Vaishnava Edition";
        }

        [data-edition="vaishnava"][data-theme="dark"] {
            /* –í–∞–π—à–Ω–∞–≤ Edition Dark */
            --bg-primary: #2e1b00;
            --bg-secondary: #3e2a00;
            --bg-tertiary: #4e3a00;
            --text-primary: #ffcc02;
            --text-secondary: #ffb74d;
            --text-muted: #ffa726;
            --accent-color: #ff9800;
            --accent-hover: #f57c00;
            --border-color: #5d4037;
            --shadow: rgba(255, 152, 0, 0.3);
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --error-color: #f44336;
            --logo-emoji: "üïâÔ∏è";
            --edition-name: "Freedome Sphere Vaishnava Edition";
        }

        [data-edition="enterprise"] {
            /* Enterprise Edition - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏–Ω—è—è —Ç–µ–º–∞ */
            --bg-primary: #f3f6ff;
            --bg-secondary: #e3ebff;
            --bg-tertiary: #c7d2fe;
            --text-primary: #1e3a8a;
            --text-secondary: #3730a3;
            --text-muted: #6366f1;
            --accent-color: #3b82f6;
            --accent-hover: #2563eb;
            --border-color: #a5b4fc;
            --shadow: rgba(59, 130, 246, 0.15);
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --logo-emoji: "üè¢";
            --edition-name: "Freedome Sphere Enterprise Edition";
        }

        [data-edition="enterprise"][data-theme="dark"] {
            /* Enterprise Edition Dark */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --accent-color: #3b82f6;
            --accent-hover: #2563eb;
            --border-color: #475569;
            --shadow: rgba(59, 130, 246, 0.3);
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --logo-emoji: "üè¢";
            --edition-name: "Freedome Sphere Enterprise Edition";
        }

        [data-edition="education"] {
            /* Education Edition - –∑–µ–ª–µ–Ω–∞—è —Ç–µ–º–∞ */
            --bg-primary: #f0fdf4;
            --bg-secondary: #dcfce7;
            --bg-tertiary: #bbf7d0;
            --text-primary: #14532d;
            --text-secondary: #166534;
            --text-muted: #16a34a;
            --accent-color: #22c55e;
            --accent-hover: #16a34a;
            --border-color: #86efac;
            --shadow: rgba(34, 197, 94, 0.15);
            --success-color: #22c55e;
            --warning-color: #eab308;
            --error-color: #ef4444;
            --logo-emoji: "üéì";
            --edition-name: "Freedome Sphere Education Edition";
        }

        [data-edition="education"][data-theme="dark"] {
            /* Education Edition Dark */
            --bg-primary: #0c1a0c;
            --bg-secondary: #1a2e1a;
            --bg-tertiary: #2d4a2d;
            --text-primary: #dcfce7;
            --text-secondary: #bbf7d0;
            --text-muted: #86efac;
            --accent-color: #22c55e;
            --accent-hover: #16a34a;
            --border-color: #365f36;
            --shadow: rgba(34, 197, 94, 0.3);
            --success-color: #22c55e;
            --warning-color: #eab308;
            --error-color: #ef4444;
            --logo-emoji: "üéì";
            --edition-name: "Freedome Sphere Education Edition";
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .app-container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 300px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .toolbar {
            height: 60px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 20px;
        }

        .viewport {
            flex: 1;
            background: var(--bg-primary);
            position: relative;
            overflow: hidden;
        }

        .status-bar {
            height: 30px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 20px;
            font-size: 12px;
        }

        .logo {
            font-size: 18px;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 20px;
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo::before {
            content: var(--logo-emoji);
            font-size: 24px;
        }

        .panel {
            flex: 1;
            padding: 20px;
        }

        .panel h3 {
            margin-bottom: 15px;
            color: var(--accent-color);
        }

        .button {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px 0;
            width: 100%;
            font-size: 14px;
            transition: background 0.2s;
        }

        .button:hover {
            background: var(--accent-hover);
        }

        .button.secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .button.secondary:hover {
            background: var(--border-color);
        }

        .button.success {
            background: var(--success-color);
        }

        .button.success:hover {
            background: #218838;
        }

        .file-list {
            background: var(--bg-tertiary);
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .file-item {
            padding: 5px;
            cursor: pointer;
            border-radius: 3px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-item:hover {
            background: var(--border-color);
        }

        .file-item.selected {
            background: var(--accent-color);
            color: white;
        }

        .viewport-3d {
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            position: relative;
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--bg-tertiary);
            border-top: 4px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .project-info {
            background: var(--bg-tertiary);
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        .project-info h4 {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .project-info p {
            font-size: 12px;
            color: var(--text-secondary);
            margin: 5px 0;
        }

        .audio-controls {
            background: var(--bg-tertiary);
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        .audio-controls h4 {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .slider {
            width: 100%;
            margin: 10px 0;
        }

        .dome-controls {
            background: var(--bg-tertiary);
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        .dome-controls h4 {
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .dome-controls input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .status-indicator.ready {
            background: var(--success-color);
        }

        .status-indicator.working {
            background: var(--warning-color);
        }

        .status-indicator.error {
            background: var(--error-color);
        }

        .edition-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-right: 20px;
        }

        .edition-selector select {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
        }

        .theme-toggle {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background: var(--border-color);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="sidebar">
            <div class="logo" id="appLogo">
                Freedome Sphere
            </div>
            <div class="panel">
                <h3>Project</h3>
                <button class="button" onclick="newProject()">New Project</button>
                <button class="button secondary" onclick="openProject()">Open Project</button>
                <button class="button secondary" onclick="saveProject()">Save Project</button>
                
                <div class="project-info" id="projectInfo" style="display: none;">
                    <h4>Current Project</h4>
                    <p id="projectName">Untitled Project</p>
                    <p id="projectPath">No path</p>
                    <p id="projectStatus">Ready</p>
                </div>
                
                <h3>Import</h3>
                <button class="button" onclick="importComics()">üìö Baranko Comics</button>
                <button class="button" onclick="importUnreal()">üéÆ Unreal Engine</button>
                <button class="button" onclick="importBlender()">üé® Blender Model</button>
                
                <div class="file-list" id="importedFiles" style="display: none;">
                    <h4>Imported Files</h4>
                    <div id="filesList"></div>
                </div>
                
                <h3>Audio</h3>
                <button class="button" onclick="setupAnantaSound()">üîä anAntaSound Setup</button>
                <button class="button secondary" onclick="audio3D()">üéµ 3D Positioning</button>
                <button class="button" onclick="loadDagaFile()">üìÅ Load .daga File</button>
                <button class="button secondary" onclick="saveDagaFile()">üíæ Save as .daga</button>
                
                <h3>3D Content</h3>
                <button class="button" onclick="loadZelimFile()">üìÅ Load .zelim File</button>
                <button class="button secondary" onclick="saveZelimFile()">üíæ Save as .zelim</button>
                
                <div class="audio-controls" id="audioControls" style="display: none;">
                    <h4>Audio Sources</h4>
                    <div id="audioSources"></div>
                </div>
                
                <h3>Dome Settings</h3>
                <div class="dome-controls">
                    <h4>Dome Configuration</h4>
                    <label>Radius: <span id="radiusValue">10m</span></label>
                    <input type="range" min="5" max="50" value="10" id="domeRadius" onchange="updateDomeRadius()" class="slider">
                    
                    <label>Projection Type:</label>
                    <select id="projectionType" onchange="updateProjectionType()">
                        <option value="spherical">Spherical</option>
                        <option value="fisheye">Fisheye</option>
                        <option value="equirectangular">Equirectangular</option>
                    </select>
                </div>
                
                <h3>Export</h3>
                <button class="button success" onclick="exportMbharata()">üì± mbharata_client</button>
                <button class="button secondary" onclick="exportDome()">üåê Dome Projection</button>
            </div>
        </div>
        
        <div class="main-content">
            <div class="toolbar">
                <button class="button" onclick="playPreview()">‚ñ∂Ô∏è Play Preview</button>
                <button class="button secondary" onclick="stopPreview()">‚èπÔ∏è Stop</button>
                <button class="button secondary" onclick="resetView()">üîÑ Reset View</button>
                
                <div class="edition-selector">
                    <label for="editionSelect">Edition:</label>
                    <select id="editionSelect" onchange="changeEdition()">
                        <option value="default">Standard</option>
                        <option value="vaishnava">Vaishnava</option>
                        <option value="enterprise">Enterprise</option>
                        <option value="education">Education</option>
                    </select>
                    <button class="theme-toggle" onclick="toggleTheme()" id="themeToggle">üåô Dark</button>
                </div>
                
                <div style="margin-left: auto;">
                    <span class="status-indicator ready" id="statusIndicator"></span>
                    <span id="statusText">Ready</span>
                </div>
            </div>
            
            <div class="viewport">
                <div id="viewport3d" class="viewport-3d">
                    <div class="loading" id="loadingIndicator">
                        <div class="spinner"></div>
                        <div>Loading 3D Viewport...</div>
                    </div>
                </div>
            </div>
            
            <div class="status-bar">
                <span>Freedome Sphere v1.0.0</span>
                <span style="margin-left: auto;">Ready to create immersive content</span>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentProject = null;
        let importedFiles = [];
        let audioSources = [];
        let isPlaying = false;
        let currentEdition = 'default';
        let currentTheme = 'light';

        // –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function newProject() {
            console.log('Creating new project...');
            currentProject = {
                name: 'Untitled Project',
                path: null,
                domeRadius: 10,
                projectionType: 'spherical',
                scenes: [],
                audio: [],
                comics: [],
                created: new Date().toISOString()
            };
            
            updateProjectInfo();
            setStatus('Project created', 'ready');
        }

        function openProject() {
            console.log('Opening project...');
            // –õ–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ IPC
        }

        function saveProject() {
            console.log('Saving project...');
            if (currentProject) {
                setStatus('Saving project...', 'working');
                // –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
                setTimeout(() => {
                    setStatus('Project saved', 'ready');
                }, 1000);
            }
        }

        function importComics() {
            console.log('Importing Baranko comics...');
            setStatus('Selecting comics folder...', 'working');
            // –õ–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –∫–æ–º–∏–∫—Å–æ–≤ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ IPC
        }

        function importUnreal() {
            console.log('Importing Unreal Engine scene...');
            setStatus('Selecting Unreal Engine file...', 'working');
            // –õ–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ Unreal Engine –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ IPC
        }

        function importBlender() {
            console.log('Importing Blender model...');
            setStatus('Selecting Blender file...', 'working');
            // –õ–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ Blender –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ IPC
        }

        function setupAnantaSound() {
            console.log('Setting up anAntaSound...');
            setStatus('Configuring anAntaSound...', 'working');
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∞—É–¥–∏–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
            const audioSource = {
                id: Date.now(),
                name: 'Test Audio Source',
                type: 'ambient',
                position: { x: 0, y: 0, z: 0 },
                volume: 0.8,
                file: null
            };
            
            audioSources.push(audioSource);
            updateAudioControls();
            setStatus('anAntaSound configured', 'ready');
        }

        function audio3D() {
            console.log('3D Audio positioning...');
            setStatus('Opening 3D Audio editor...', 'working');
            // –õ–æ–≥–∏–∫–∞ 3D –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞—É–¥–∏–æ
        }

        function loadDagaFile() {
            console.log('Loading .daga file...');
            setStatus('Selecting .daga file...', 'working');
            // –õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ .daga —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ IPC
        }

        function saveDagaFile() {
            console.log('Saving as .daga file...');
            setStatus('Saving as .daga file...', 'working');
            // –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è .daga —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ IPC
        }

        function loadZelimFile() {
            console.log('Loading .zelim file...');
            setStatus('Selecting .zelim file...', 'working');
            // –õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ .zelim —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ IPC
        }

        function saveZelimFile() {
            console.log('Saving as .zelim file...');
            setStatus('Saving as .zelim file...', 'working');
            // –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è .zelim —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ IPC
        }

        function exportMbharata() {
            console.log('Exporting to mbharata_client...');
            if (!currentProject) {
                alert('Please create or open a project first');
                return;
            }
            
            setStatus('Exporting to mbharata_client...', 'working');
            // –õ–æ–≥–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–ª—è mbharata_client –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —á–µ—Ä–µ–∑ IPC
        }

        function exportDome() {
            console.log('Exporting dome projection...');
            setStatus('Exporting dome projection...', 'working');
            // –õ–æ–≥–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–ª—è –∫—É–ø–æ–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        }

        function playPreview() {
            console.log('Playing preview...');
            isPlaying = true;
            setStatus('Playing preview...', 'working');
            // –õ–æ–≥–∏–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–µ–≤—å—é
        }

        function stopPreview() {
            console.log('Stopping preview...');
            isPlaying = false;
            setStatus('Preview stopped', 'ready');
            // –õ–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–µ–≤—å—é
        }

        function resetView() {
            console.log('Resetting view...');
            setStatus('Resetting view...', 'working');
            // –õ–æ–≥–∏–∫–∞ —Å–±—Ä–æ—Å–∞ –≤–∏–¥–∞
            setTimeout(() => {
                setStatus('View reset', 'ready');
            }, 500);
        }

        function updateDomeRadius() {
            const radius = document.getElementById('domeRadius').value;
            document.getElementById('radiusValue').textContent = radius + 'm';
            
            if (currentProject) {
                currentProject.domeRadius = parseInt(radius);
            }
            
            console.log('Dome radius updated to:', radius);
        }

        function updateProjectionType() {
            const type = document.getElementById('projectionType').value;
            
            if (currentProject) {
                currentProject.projectionType = type;
            }
            
            console.log('Projection type updated to:', type);
        }

        function updateProjectInfo() {
            const projectInfo = document.getElementById('projectInfo');
            const projectName = document.getElementById('projectName');
            const projectPath = document.getElementById('projectPath');
            const projectStatus = document.getElementById('projectStatus');
            
            if (currentProject) {
                projectInfo.style.display = 'block';
                projectName.textContent = currentProject.name;
                projectPath.textContent = currentProject.path || 'No path';
                projectStatus.textContent = 'Ready';
            } else {
                projectInfo.style.display = 'none';
            }
        }

        function updateAudioControls() {
            const audioControls = document.getElementById('audioControls');
            const audioSourcesDiv = document.getElementById('audioSources');
            
            if (audioSources.length > 0) {
                audioControls.style.display = 'block';
                audioSourcesDiv.innerHTML = '';
                
                audioSources.forEach(source => {
                    const sourceDiv = document.createElement('div');
                    sourceDiv.className = 'file-item';
                    sourceDiv.innerHTML = `
                        <span>üéµ</span>
                        <span>${source.name}</span>
                        <span style="margin-left: auto;">${source.type}</span>
                    `;
                    audioSourcesDiv.appendChild(sourceDiv);
                });
            } else {
                audioControls.style.display = 'none';
            }
        }

        function setStatus(message, type) {
            const statusText = document.getElementById('statusText');
            const statusIndicator = document.getElementById('statusIndicator');
            
            statusText.textContent = message;
            statusIndicator.className = `status-indicator ${type}`;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ IPC —Å–æ–±—ã—Ç–∏–π
        const { ipcRenderer } = require('electron');

        ipcRenderer.on('menu-new-project', () => {
            newProject();
        });

        ipcRenderer.on('menu-open-project', (event, filePath) => {
            console.log('Opening project from:', filePath);
            // –õ–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞
        });

        ipcRenderer.on('menu-save-project', () => {
            saveProject();
        });

        ipcRenderer.on('menu-import-comics', async (event, folderPath) => {
            console.log('Importing comics from:', folderPath);
            setStatus('Importing comics...', 'working');
            
            try {
                // –†–µ–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –∫–æ–º–∏–∫—Å–æ–≤ —á–µ—Ä–µ–∑ IPC
                const result = await ipcRenderer.invoke('import-comics', folderPath);
                
                if (result.success) {
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–∏–∫—Å–æ–≤
                    const comicFiles = result.comics.map(comic => ({
                        name: comic.name,
                        type: 'comic',
                        id: comic.id,
                        originalPath: comic.originalPath
                    }));
                    
                    importedFiles = [...importedFiles, ...comicFiles];
                    updateImportedFiles();
                    setStatus(`Comics imported successfully (${result.count} files)`, 'ready');
                } else {
                    setStatus(`Import failed: ${result.error}`, 'error');
                }
            } catch (error) {
                console.error('Error importing comics:', error);
                setStatus('Import failed', 'error');
            }
        });

        ipcRenderer.on('menu-import-unreal', (event, filePath) => {
            console.log('Importing Unreal Engine from:', filePath);
            setStatus('Importing Unreal Engine scene...', 'working');
            
            setTimeout(() => {
                const unrealFile = { name: path.basename(filePath), type: 'unreal' };
                importedFiles.push(unrealFile);
                updateImportedFiles();
                setStatus('Unreal Engine scene imported', 'ready');
            }, 2000);
        });

        ipcRenderer.on('menu-import-blender', (event, filePath) => {
            console.log('Importing Blender from:', filePath);
            setStatus('Importing Blender model...', 'working');
            
            setTimeout(() => {
                const blenderFile = { name: path.basename(filePath), type: 'blender' };
                importedFiles.push(blenderFile);
                updateImportedFiles();
                setStatus('Blender model imported', 'ready');
            }, 2000);
        });

        ipcRenderer.on('menu-export-mbharata', async (event, outputPath) => {
            console.log('Exporting to mbharata_client:', outputPath);
            setStatus('Exporting to mbharata_client...', 'working');
            
            try {
                if (!currentProject) {
                    setStatus('No project to export', 'error');
                    return;
                }
                
                // –†–µ–∞–ª—å–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ IPC
                const result = await ipcRenderer.invoke('export-mbharata', currentProject, outputPath);
                
                if (result.success) {
                    setStatus(`Export completed successfully (${result.metadata.fileSizeFormatted})`, 'ready');
                    console.log('Export metadata:', result.metadata);
                } else {
                    setStatus(`Export failed: ${result.error}`, 'error');
                }
            } catch (error) {
                console.error('Error exporting project:', error);
                setStatus('Export failed', 'error');
            }
        });

        ipcRenderer.on('menu-export-dome', (event, outputPath) => {
            console.log('Exporting dome projection:', outputPath);
            setStatus('Exporting dome projection...', 'working');
            
            setTimeout(() => {
                setStatus('Dome projection exported', 'ready');
            }, 2000);
        });

        ipcRenderer.on('menu-load-daga', async (event, filePath) => {
            console.log('Loading .daga file from:', filePath);
            setStatus('Loading .daga file...', 'working');
            
            try {
                // –†–µ–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ .daga —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ IPC
                const result = await ipcRenderer.invoke('load-daga-file', filePath);
                
                if (result.success) {
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∞—É–¥–∏–æ
                    const dagaAudio = {
                        name: result.data.audio.name,
                        type: 'daga_audio',
                        id: result.data.audio.id,
                        format: 'daga',
                        spatial: result.data.spatial,
                        anantasound: result.data.anantasound
                    };
                    
                    audioSources.push(dagaAudio);
                    updateAudioControls();
                    setStatus(`Daga file loaded: ${result.data.audio.name}`, 'ready');
                } else {
                    setStatus(`Load failed: ${result.error}`, 'error');
                }
            } catch (error) {
                console.error('Error loading .daga file:', error);
                setStatus('Load failed', 'error');
            }
        });

        ipcRenderer.on('menu-save-daga', async (event, outputPath) => {
            console.log('Saving .daga file to:', outputPath);
            setStatus('Saving .daga file...', 'working');
            
            try {
                if (audioSources.length === 0) {
                    setStatus('No audio sources to save', 'error');
                    return;
                }
                
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞—É–¥–∏–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫–∞–∫ .daga
                const audioData = audioSources[0];
                const result = await ipcRenderer.invoke('save-daga-file', audioData, outputPath);
                
                if (result.success) {
                    setStatus(`Daga file saved: ${result.path}`, 'ready');
                } else {
                    setStatus(`Save failed: ${result.error}`, 'error');
                }
            } catch (error) {
                console.error('Error saving .daga file:', error);
                setStatus('Save failed', 'error');
            }
        });

        ipcRenderer.on('menu-load-zelim', async (event, filePath) => {
            console.log('Loading .zelim file from:', filePath);
            setStatus('Loading .zelim file...', 'working');
            
            try {
                // –†–µ–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ .zelim —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ IPC
                const result = await ipcRenderer.invoke('load-zelim-file', filePath);
                
                if (result.success) {
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ 3D –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                    const zelimContent = {
                        name: result.data.project.name,
                        type: 'zelim_3d',
                        id: result.data.project.id,
                        format: 'zelim',
                        scene: result.data.scene,
                        dome: result.data.dome
                    };
                    
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
                    setStatus(`Zelim file loaded: ${result.data.project.name}`, 'ready');
                } else {
                    setStatus(`Load failed: ${result.error}`, 'error');
                }
            } catch (error) {
                console.error('Error loading .zelim file:', error);
                setStatus('Load failed', 'error');
            }
        });

        ipcRenderer.on('menu-save-zelim', async (event, outputPath) => {
            console.log('Saving .zelim file to:', outputPath);
            setStatus('Saving .zelim file...', 'working');
            
            try {
                // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ 3D –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                const content3D = {
                    name: 'Test 3D Content',
                    author: 'Freedome Sphere',
                    description: 'Test 3D content for .zelim format',
                    domeRadius: 10,
                    projectionType: 'spherical',
                    models: [
                        {
                            name: 'Test Model',
                            geometryType: 'mesh',
                            triangles: 1000,
                            vertices: 500
                        }
                    ],
                    materials: [
                        {
                            name: 'Test Material',
                            type: 'standard',
                            color: '#ffffff',
                            metalness: 0.0,
                            roughness: 0.5
                        }
                    ],
                    animations: [],
                    textures: []
                };
                
                const result = await ipcRenderer.invoke('save-zelim-file', content3D, outputPath);
                
                if (result.success) {
                    setStatus(`Zelim file saved: ${result.path}`, 'ready');
                } else {
                    setStatus(`Save failed: ${result.error}`, 'error');
                }
            } catch (error) {
                console.error('Error saving .zelim file:', error);
                setStatus('Save failed', 'error');
            }
        });

        function updateImportedFiles() {
            const importedFilesDiv = document.getElementById('importedFiles');
            const filesList = document.getElementById('filesList');
            
            if (importedFiles.length > 0) {
                importedFilesDiv.style.display = 'block';
                filesList.innerHTML = '';
                
                importedFiles.forEach(file => {
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'file-item';
                    
                    let icon = 'üìÑ';
                    if (file.type === 'comic') icon = 'üìö';
                    else if (file.type === 'unreal') icon = 'üéÆ';
                    else if (file.type === 'blender') icon = 'üé®';
                    
                    fileDiv.innerHTML = `
                        <span>${icon}</span>
                        <span>${file.name}</span>
                        <span style="margin-left: auto;">${file.type}</span>
                    `;
                    filesList.appendChild(fileDiv);
                });
            } else {
                importedFilesDiv.style.display = 'none';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Freedome Sphere initialized');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            loadSettings();
            
            setStatus('Ready', 'ready');
            
            // –°–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            setTimeout(() => {
                document.getElementById('loadingIndicator').style.display = 'none';
            }, 1000);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 3D viewport
            init3DViewport();
        });

        function init3DViewport() {
            console.log('Initializing 3D viewport...');
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Three.js
            // –ü–æ–∫–∞ —á—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        }

        // –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–º–∞–º–∏ –∏ —Ä–µ–¥–∞–∫—Ü–∏—è–º–∏
        function changeEdition() {
            const editionSelect = document.getElementById('editionSelect');
            const newEdition = editionSelect.value;
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
            document.body.removeAttribute('data-edition');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—É—é —Ä–µ–¥–∞–∫—Ü–∏—é
            if (newEdition !== 'default') {
                document.body.setAttribute('data-edition', newEdition);
            }
            
            currentEdition = newEdition;
            updateLogo();
            saveSettings();
            
            console.log(`Edition changed to: ${newEdition}`);
        }

        function toggleTheme() {
            const themeToggle = document.getElementById('themeToggle');
            
            if (currentTheme === 'light') {
                document.body.setAttribute('data-theme', 'dark');
                currentTheme = 'dark';
                themeToggle.textContent = '‚òÄÔ∏è Light';
            } else {
                document.body.removeAttribute('data-theme');
                currentTheme = 'light';
                themeToggle.textContent = 'üåô Dark';
            }
            
            updateLogo();
            saveSettings();
            
            console.log(`Theme changed to: ${currentTheme}`);
        }

        function updateLogo() {
            const logo = document.getElementById('appLogo');
            const editionName = getComputedStyle(document.body).getPropertyValue('--edition-name').trim();
            logo.textContent = editionName;
        }

        function saveSettings() {
            const settings = {
                edition: currentEdition,
                theme: currentTheme
            };
            localStorage.setItem('freedomeSphereSettings', JSON.stringify(settings));
        }

        function loadSettings() {
            const saved = localStorage.getItem('freedomeSphereSettings');
            if (saved) {
                const settings = JSON.parse(saved);
                currentEdition = settings.edition || 'default';
                currentTheme = settings.theme || 'light';
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                const editionSelect = document.getElementById('editionSelect');
                const themeToggle = document.getElementById('themeToggle');
                
                editionSelect.value = currentEdition;
                if (currentEdition !== 'default') {
                    document.body.setAttribute('data-edition', currentEdition);
                }
                
                if (currentTheme === 'dark') {
                    document.body.setAttribute('data-theme', 'dark');
                    themeToggle.textContent = '‚òÄÔ∏è Light';
                } else {
                    themeToggle.textContent = 'üåô Dark';
                }
                
                updateLogo();
            }
        }
    </script>
</body>
</html>
