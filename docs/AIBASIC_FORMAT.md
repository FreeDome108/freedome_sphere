# Формат .aibasic - AIBasic с 108-битной архитектурой

Этот документ описывает формат файла .aibasic, предназначенный для использования с гипотетической средой разработки AIBasic, основанной на синтаксисе ZX Spectrum 48K BASIC и адаптированной для работы с 108-битной архитектурой.

## Основная Структура

Файл .aibasic содержит код программы, который состоит из пронумерованных строк. Вся программа делится на **основную программу** и **подпрограммы**.

### Основная Программа

*   Основная программа является точкой входа в выполнение кода.
*   Она **НЕ может содержать более 108 пронумерованных строк**. Это ограничение символизирует 108-битную разрядность архитектуры и стимулирует использование подпрограмм для более сложных задач.
*   Строки основной программы обычно имеют возрастающую нумерацию, начиная с любого числа (например, 10, 20, 30...).

### Подпрограммы

*   Подпрограммы - это именованные блоки кода, которые выполняют определенные задачи.
*   Они вызываются из основной программы или других подпрограмм.
*   Каждая подпрограмма начинается с **метки (label)**, которая является ее именем. Метка не имеет номера строки.
*   Строки внутри подпрограммы также пронумерованы, и их нумерация может начинаться с любого числа, независимо от нумерации основной программы или других подпрограмм.
*   Нет жесткого ограничения на количество строк внутри отдельной подпрограммы, но для поддержания читаемости и соответствия духу BASIC рекомендуется держать их относительно компактными.
*   Подпрограммы заканчиваются командой `RETURN`.

## Синтаксис

AIBasic использует расширенный синтаксис ZX Spectrum 48K BASIC с добавлением новых команд для работы с 108-битной архитектурой и AI/квантовыми концепциями.

### Классические Команды (из Spectrum 48K BASIC)

Все стандартные команды ZX Spectrum 48K BASIC поддерживаются, включая (но не ограничиваясь):

*   `PRINT`, `LET`, `GOTO`, `FOR`, `NEXT`, `IF`, `THEN`, `ELSE`
*   `DIM`, `DATA`, `READ`, `RESTORE`, `RANDOMIZE`
*   `INPUT`, `REM`, `CLS`, `BORDER`, `INK`, `PAPER`, `FLASH`, `BRIGHT`, `INVERSE`, `OVER`
*   `PLOT`, `DRAW`, `CIRCLE`
*   `SOUND`, `BEEP`
*   `PEEK`, `POKE`
*   Функции: `USR`, `CODE`, `VAL`, `STR$`, `CHR$`, `SCREEN$`, `ATTR`, `POINT`, `BIN`, `LEN`, `SGN`, `ABS`, `INT`, `PI`, `FN`, `DEF FN`

### Локализация Команд

**Основные команды AIBASIC автоматически отображаются на языке пользователя** в зависимости от текущей локали:

*   **Английский (по умолчанию):** `LET`, `PRINT`, `GOTO`, `FOR`, `NEXT`, `IF`, `THEN`, `ELSE`
*   **Русский:** `ПУСТЬ`, `ПЕЧАТЬ`, `ПЕРЕЙТИ`, `ДЛЯ`, `ДАЛЕЕ`, `ЕСЛИ`, `ТО`, `ИНАЧЕ`
*   **Немецкий:** `LASSEN`, `DRUCKEN`, `GEHE_ZU`, `FÜR`, `NÄCHSTE`, `WENN`, `DANN`, `SONST`
*   **Арабский:** `دع`, `اطبع`, `اذهب_إلى`, `لـ`, `التالي`, `إذا`, `ثم`, `وإلا`
*   **Португальский:** `DEIXAR`, `IMPRIMIR`, `IR_PARA`, `PARA`, `PRÓXIMO`, `SE`, `ENTÃO`, `SENÃO`
*   **Тайский:** `ให้`, `พิมพ์`, `ไปที่`, `สำหรับ`, `ถัดไป`, `ถ้า`, `แล้ว`, `อื่น`
*   **Хинди:** `दे`, `छाप`, `जाओ`, `के_लिए`, `अगला`, `अगर`, `तो`, `वरना`
*   **Казахский:** `БОЛСЫН`, `БАСЫП_ШЫҒАРУ`, `БАРУ`, `ҮШІН`, `КЕЛЕСІ`, `ЕГЕР`, `ОНДА`, `ӘЙТПЕСЕ`

**Переменные отображаются на том языке, на котором они написаны**, без автоматического перевода. Это позволяет разработчикам использовать переменные на любом языке, сохраняя их оригинальное написание.

**Примеры локализованного кода:**

```aibasic
10 LET имя_пользователя = "Антон"
20 PRINT "Привет, " + имя_пользователя
30 IF имя_пользователя = "Антон" THEN GOTO 50
40 PRINT "Неизвестный пользователь"
50 PRINT "Добро пожаловать!"
```

```aibasic
10 ПУСТЬ user_name = "Anton"
20 ПЕЧАТЬ "Hello, " + user_name
30 ЕСЛИ user_name = "Anton" ТО ПЕРЕЙТИ 50
40 ПЕЧАТЬ "Unknown user"
50 ПЕЧАТЬ "Welcome!"
```

### Новые Команды и Типы Данных (для 108-битной архитектуры и AI)

*   **Типы Данных:**
    *   `LONGINT108`: 108-битное целое число.
    *   `FLOAT108`: 108-битное число с плавающей запятой.
    *   `QUANTUMARRAY`: Специальный тип массива для хранения данных, оптимизированных для 108-битной обработки или квантовых вычислений.
*   **Команды для Подпрограмм:**
    *   `EXEC label [WITH param1, param2, ...]`: Выполняет подпрограмму, начинающуюся с указанной метки. Опционально может передавать параметры.
    *   `RETURN`: Завершает выполнение текущей подпрограммы.
    *   `PARAM param_name1, param_name2, ...`: Используется в начале подпрограммы для объявления имен принимаемых параметров.
*   **Команды для AI и Квантовых Вычислений:**
    *   `LOAD_AI_MODEL "model_name" AS model_variable`: Загружает AI-модель.
    *   `PROCESS_QUANTUM_ARRAY input_array USING model_variable TO output_array`: Обрабатывает данные (возможно, квантовые) с помощью AI-модели.
    *   `CREATE_QUANTUM_STATE num_qubits AS state_variable`: Создает квантовое состояние.
    *   `APPLY_QUANTUM_GATE gate_type TO state_variable AT index`: Применяет "квантовый вентиль".
    *   `MEASURE_QUANTUM_STATE state_variable TO result_variable`: Измеряет квантовое состояние.
    *   `GET_MEMORY_108 ADDRESS address_variable TO value_variable`: Читает 108-битное значение из памяти.
    *   `PUT_MEMORY_108 VALUE value_variable TO ADDRESS address_variable`: Записывает 108-битное значение в память.
    *   `RENDER_HOLOGRAM data_array AT position`: Команда для вывода визуальной информации.
*   **Работа с Памятью:** Расширенные возможности `PEEK` и `POKE` для работы с 108-битными адресами или новый набор команд (`GET_MEMORY_108`, `PUT_MEMORY_108`).

## Разделение Основной Программы и Подпрограмм в Файле

Основная программа и подпрограммы могут быть разделены в файле следующими способами:

*   **Специальный маркер:** Например, строка, начинающаяся с `'---'` или аналогичный разделитель.
*   **Позиция:** Подпрограммы просто следуют за последней строкой основной программы. Начало подпрограммы определяется наличием метки (строки без номера).

**Пример структуры файла .aibasic:**

## Интерпретация на Различных Платформах

Формат .aibasic предназначен для выполнения как на гипотетических 108-битных системах, так и на системах с другой разрядностью (например, 64-битных).

*   **108-битный Интерпретатор:** Выполняет код напрямую, используя нативные 108-битные операции и типы данных.
*   **Интерпретатор для Другой Разрядности:**
    *   Анализирует AIBasic код.
    *   Имитирует 108-битные операции и типы данных, используя доступные на текущей платформе средства (например, массивы байтов или многословную арифметику).
    *   Обращение к 108-битной памяти может быть абстрагировано или перенаправлено.
    *   Вызовы AI/квантовых функций могут быть реализованы через взаимодействие с внешними библиотеками или сервисами, которые могут выполнять необходимые вычисления.
    *   Производительность и точность 108-битных операций на системах с меньшей разрядностью может быть снижена.

## Заключение

Формат .aibasic определяет структуру программы, синтаксис и ключевые особенности для работы с 108-битной архитектурой и AI/квантовыми концепциями, сохраняя при этом знакомую и простую структуру BASIC. Ограничение на количество строк в основной программе стимулирует модульность и использование подпрограмм.
